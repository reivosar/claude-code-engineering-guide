# コードレビュー

## 概要

テスト完了後、デプロイ前に実施するコードレビューのプロセスです。品質向上、知識共有、バグ検出を目的とします。

## コードレビュープロセス

### 1. レビュー前準備

```markdown
## 作成者が実施すべき事項

### セルフレビュー
- [ ] コードの動作確認
- [ ] テストの実行・成功確認
- [ ] コーディング規約準拠
- [ ] 不要なコメントアウト削除

### プルリクエスト準備
- [ ] 変更内容の明確な説明
- [ ] 関連Issue番号記載
- [ ] スクリーンショット添付（UI変更時）
- [ ] 破壊的変更の明記
```

### 2. レビュー観点

```markdown
## レビューチェックリスト

### 機能性
- [ ] 要件通りに動作するか
- [ ] エッジケースを考慮しているか
- [ ] エラーハンドリングが適切か
- [ ] パフォーマンスに問題はないか

### 保守性
- [ ] コードが読みやすいか
- [ ] 責任分離ができているか
- [ ] 重複コードはないか
- [ ] 命名が適切か

### セキュリティ
- [ ] 入力値検証があるか
- [ ] 認証・認可が適切か
- [ ] 機密情報の漏洩リスクはないか
- [ ] SQLインジェクション対策があるか

### テスト
- [ ] 十分なテストカバレッジか
- [ ] テストケースが適切か
- [ ] テストが独立しているか
- [ ] テストが理解しやすいか
```

### 3. レビューコメントガイドライン

```markdown
## 良いレビューコメント例

### 具体的な改善提案
❌ 「このコードは良くない」
✅ 「この部分はXXXの理由でYYYに変更することを提案します」

### 理由付きフィードバック
❌ 「変数名を変えて」
✅ 「変数名`data`は汎用的すぎるため、`userProfile`など具体的な名前にしませんか？」

### 質問形式での指摘
❌ 「これは間違い」
✅ 「この実装だとXXXの場合に問題が起きませんか？」

### ポジティブフィードバック
✅ 「このエラーハンドリングは素晴らしいです！」
✅ 「この設計により保守性が向上しますね」
```

### 4. Claude Codeでのレビュー支援

```markdown
## Claude Codeへのレビュー依頼例

「以下のコードをレビューしてください。

[コードを添付]

レビュー観点:
- セキュリティ脆弱性
- パフォーマンス問題
- 保守性
- テスト可能性
- ベストプラクティス準拠

特に気になる点:
- XXXの実装方法
- YYYのパフォーマンス
- ZZZのセキュリティ対策」
```

### 5. レビュー後のアクション

```markdown
## 修正対応

### 必須修正（Must Fix）
- セキュリティ脆弱性
- 機能バグ
- パフォーマンス問題

### 推奨修正（Should Fix）
- コーディング規約違反
- 保守性の問題
- テスト不足

### 任意修正（Nice to Have）
- より良い実装方法の提案
- リファクタリング提案
- 将来的な改善案

## 承認基準
- [ ] 必須修正がすべて対応済み
- [ ] テストが通る
- [ ] CI/CDが成功
- [ ] 2名以上の承認（重要な変更時）
```

## レビュー文化の醸成

### 1. 心理的安全性の確保

```markdown
## レビューの心構え

### レビュアー
- コードを批判するのではなく、改善を提案する
- 学習機会として捉える
- 相手の立場に立って考える

### 作成者  
- フィードバックを学習機会として受け取る
- 防御的にならず、建設的に議論する
- 不明な点は積極的に質問する
```

### 2. 効率的なレビュー運用

```markdown
## レビュー効率化

### 時間管理
- 1回のレビューは30分以内
- 大きな変更は事前設計レビューを実施
- 緊急時のレビュー短縮ルール策定

### 自動化活用
- Linter/Formatterで形式的チェック自動化
- 静的解析ツールでセキュリティチェック
- CI/CDでテスト自動実行
```

---
[← 05. テスト](../05.testing/01.testing-strategy.md) | [06. デプロイ →](../06.deployment/01.deployment-strategy.md)